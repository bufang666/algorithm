# 位运算



# 基本知识

## 进制

![image-20210720160253623](C:\Users\win10\AppData\Roaming\Typora\typora-user-images\image-20210720160253623.png)



任意进制转十进制

```cpp
int Atoi (string s, int radix) {		// s是给定的radix进制字符串
    int ans = 0;
    for (int i = 0; i < s.size(); i++) {
        char t = s[i];
        if (t>='0' && t<='9') 
            ans = ans*radix+t-'0';
        else 
            ans = ans*radix+t-'a'+10;
    }
    return ans;
}
```



十进制转任意进制

```cpp
string inttoA(int n, int radix) {
    string ans = "";
    do {
        int t = n%radix;
        if (t>=0 && t<=9) 
        	ans += t+'0';
       	else 
            ans += t-10+'a';
        n /= radix;
    } while ( n != 0) //用do..while 防止n=0情况
   	reverse(ans.begin(), ans.end());
    return ans;
}
```



## 原码, 补码, 反码

计算机采用的是二进制

计算机中的数据类型包括有符号类型和无符号类型，有符号类型的整数称为有符号整数，无符号类型的整数称为无符号整数。

- 对于有符号的 8 位二进制数，取值范围是 -2^7^到 2^7^−1

- 对于无符号的 8 位二进制数，取值范围是0到2^8^ - 1

以 8 位二进制数为例。十进制数 +10 转换成二进制数是 00001010，十进制数 -10转换成二进制数是 10001010。这里的 00001010 和 10001010 就是机器数。

- 原码 - 机器数的符号位加上机器数的真值的绝对值. 最高位是符号位，其余位表示数值

  +10 --> 00001010, -10 --> 10001010

- 反码 - 正数, =原码 ; 负数, =原码的除了符号位之外的每一位取反

  +10 --> 00001010, -10 -->11110101

- 补码 - 整数, =原码 ; 负数, = 反码+1

  +10 --> 00001010, -10 --> 11110110

用反码可以解决"减法运算"

用补码可以解决"减法运算" 与 "+0,-0同时存在", 所以计算机采用补码进行计算.

## 位运算符

与、或、异或、取反、左移和右移.

## 位运算性质

![image-20210720162307467](C:\Users\win10\AppData\Roaming\Typora\typora-user-images\image-20210720162307467.png)



# 例题

Q: 求一个二进制串中1的个数

A1:

```cpp
int work1() {
    int ret = 0;
	for (int i = 0; i <= 31; i++) {
    	if (n & (1<<i)) 
    	    ret++;
	}
	return ret;
}
```

A2:

```cpp
int work2() {
    int ret = 0;
    while (n) {
        n = n&(n-1);
        ret++;
    }
    return ret;
}
```



Q: 两整数之和

不使用'+', '-', 计算a+b

A:

a^b 得到不进位的加法,   (a&b)<<1得到进位加法的值

```cpp
int work(int a, int b) {
	if (!(a&b)) return a^b;
	else reutrn work(a^b, (unsigned)(a&b)<<1);
}
```



Q: 只出现一次的数字

某个元素只出现一次以外，其余每个元素均出现两次。找出那个只出现了一次的元素。

A:

x ^ y1 ^ y1 ^ y2 ^ y2 ^ y3 ^ y3 .... = x

全部异或的值为x



Q: 只出现一次的数字Ⅱ

除某个元素仅出现 一次 外，其余每个元素都恰出现三次 

A:





Q: 只出现一次的数字Ⅲ

恰好有两个元素只出现一次，其余所有元素均出现两次。

A:







# 状态压缩DP

如果有 n 个值，每个值有 2 种可能的状态，则状态总数有 2^n^ 个，可以用一个 n 位二进制数记录全部 n 个状态的取值。





