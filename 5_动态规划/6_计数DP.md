# 计数DP



不考虑用母函数等手段求解析解的话，计数问题一般有两种做法：

1. 找到组合数公式，然后用 DP 的方式或者用含阶乘的公式求组合数
2. 找到递归关系，然后以 DP 的方式求这个递推关系，如果是线性递推关系，可以用矩阵快速幂加速



以卡特兰数为例,

1. 组合数公式, C~n~ = C(n, 2n) - C(n-1, 2n) = 1/(n+1) * C (n, 2n) = 连乘 [k, 2...n] (n+k)/k
2. 递推式, C~n~ = 求和[i, 0...N-1] C~i~C~n-i-1~ 



# 路径问题

组合数学中的格路模型 < == > 放球模型

Q: 不同路径

m*n网格, 从(1, 1) 到 (m, n) 有多少种走法? 只能向右向下.

A:

向右 走 n-1 步, 向下走m-1步. ans = C( m-1, m-1+n-1)



Q: 不同路径Ⅱ

m*n网格, 从(1, 1) 到 (m, n) 有多少种走法? 只能向右向下. 有障碍物

A:

f[i, j] 走到[i, j]的方案数.

```cpp
if (a[i][j] == 0) 
	f[i][j] = 0;
else 
	f[i][j] = f[i-1][j]+f[i][j-1]
```







# 卡特兰数

Q: 不同的二叉搜索树

A:

f(n) = xigema [i, 0...n-1] f[i] * f[n-1-i] 为卡特兰数



Q: 不相交的握手

n为偶数, 站成一圈, 每个人与一个人握手

A: 

f[n] = xigema [i, 0..n-2, i+=2] f[i] * f[n-2-i]

若 m=n/2, 则 f[m] = xigema [i, 0...m-1] f[i] * f[m-1-i] 为卡特兰数





# 铺砖问题

Q: 多米诺和托米诺平铺

2*1类型 L类型 都可以旋转, 问铺成 2 * n的方案数.

A:

f[n] - 第n位占满的方案数    g[n] - 第n位占一个的方案数

```cpp
f[n] = f[n-1] + f[n-2] + g[n-1]
g[n] = 2*f[n-2] + g[n-1]
```





# 斐波那契

0, 1, 1, 2, 3, 5, 8, 13, 21, 34 ....

f[n] = f[n-1] + f[n-2], f[0] = 0, f[1] = 1

f[n] = 1/sqrt(5) * [ (1+sqrt(5))/2)^n^ - (1-sqrt(5))/2)^n^]

lim [n->∞] f[n]/f[n+1] = (sqrt(5)-1)/2

性质:

![image-20210720001459611](C:\Users\win10\AppData\Roaming\Typora\typora-user-images\image-20210720001459611.png)







# 隐晦的递推关系

Q: 不同的子序列Ⅱ

"aab" --> "a" "b" "ab" "aa" "aab" 五种

A:

dp[i] - S[0...i]可以组成的不同子序列的数目

dp[i] = 2dp[i - 1] - dp[last[s[k]]-1] , last[s[k]]为s[k]上一次出现的位置





